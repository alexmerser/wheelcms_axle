{% extends 'wheelcms_axle/base.html' %}

{% block breadcrumb %}
<div class="row">
  <div class="span12">
    <ul class="breadcrumb">
        <li>
            <a href="/">Home</a>
        <span class="divider">/</span>
        </li>
        <li>
          Search
        {% if query %}
          &rsaquo;&rsaquo; {{query}}
        {% endif %}
        </li>
    </ul>
  </div>
</div>
{% endblock %}

{% block base_main %}
<div class="row">
  <div class="span12">
    <h3>Search</h3>
  </div>
</div>
<div class="row">
  <div class="span12">
    <form method="get" action="." class="input-append">
        {{form.q}}
        <button type="submit" class="btn btn-primary">
        <i class="icon-search icon-white"></i>
        Search
        </button>
    </form>
  </div>
</div>
{% if query %}
<div class="row">
  <div class="span12">
    <table id="search_result_table" class="table table-hover">
    <tr>
      <th>Results ({{paginator.count}})</th>
    </tr>

    {% for result in page.object_list %}
    <tr class="state-{{result.state}}">
      <td>
        <span class="title"><img class="icon" src="{{result.icon}}"><a href="{{ result.path }}">{{ result.title }}</a></span>
        <span class="byline">{% if result.state == "private" %}<span class="badge badge-important">private</span>{%endif%} by {{result.owner}} &mdash; published {{result.publication}} &mdash; last modified {{result.modified}} {# &mdash; filed under foo, bar #}</span>
        <p>{{result.description|safe}}</p>
      </td>
    </tr>
    {% empty %}
    <tr>
      <td>
        <p>No results found.</p>
      </td>
    </tr>
    {% endfor %}
    </table>
  </div>
</div>

<div class="pagination pagination-centered">
<ul>

  {% if page.has_previous %}
  <li class="page previous">
    <a href="?page={{ page.previous_page_number }}&{{ GET_string }}"
       >&lsaquo;&lsaquo;
    </a>
  </li>
  {% else %}
  <li class="page previous disabled">
       <a>&lsaquo;&lsaquo;</a>
  </li>
  {% endif %}

  {% for page_number in begin %}
  <li class="page {% ifequal page.number page_number %}active{% endifequal %}">
    {% ifequal page.number page_number %}
    <a href="">{{ page_number }}</a>
    {% else %}
    <a href="?page={{ page_number }}&{{ GET_string }}"
       >{{ page_number }}</a>
    {% endifequal%}
  </li>
  {% endfor %}

  {% if middle %}
  <li class="ellipsis"><a>&hellip;</a></li>
  {% for page_number in middle %}
  <li class="page {% ifequal page.number page_number %}active{% endifequal %}">
    {% ifequal page.number page_number %}
    <a href="">{{ page_number }}</a>
    {% else %}
    <a href="?page={{ page_number }}&{{ GET_string }}"
       >{{ page_number }}</a>
    {% endifequal%}
  </li>
  {% endfor %}
  {% endif %}

  {% if end %}
  <li class="ellipsis"><a>&hellip;</a></li>
  {% for page_number in end %}
  <li class="page {% ifequal page.number page_number %}active{% endifequal %}">
    {% ifequal page.number page_number %}
    <a href="">{{ page_number }}</a>
    {% else %}
    <a href="?page={{ page_number }}&{{ GET_string }}"
       >{{ page_number }}</a>
    {% endifequal%}
  </li>
  {% endfor %}
  {% endif %}

  {% if page.has_next %}
  <li class="page next">
    <a href="?page={{ page.next_page_number }}&{{ GET_string }}"
       >&rsaquo;&rsaquo;</a>
  </li>
  {% else %}
  <li class="page next disabled">
    <a>&rsaquo;&rsaquo;</a>
  </li>
  {% endif %}
</ul>
</div>

{% endif %}
</div>
{% endblock %}
