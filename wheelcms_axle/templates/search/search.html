{% extends 'wheelcms_axle/base.html' %}

{% block breadcrumb %}
<div class="row">
  <div class="span12">
    <ul class="breadcrumb">
        <li>
            <a href="/">Home</a>
        <span class="divider">/</span>
        </li>
        <li>
          {{query}}
        </li>
    </ul>
  </div>
</div>
{% endblock %}

{% block base_main %}
<div class="row">
  <div class="span12">
    <h2>Search</h2>
  </div>
</div>
<div class="row">
  <div class="span12">
    <form method="get" action=".">
        {% include "two.bootstrap/bootstrap-form.html" with fields=form.advanced_fields %}
    </form>
  </div>
</div>
{% if query %}
<div class="row">
  <div class="span12">
    <table id="search_result_table" class="table table-hover">
    <tr>
      <th>Results</th>
    </tr>

    {% for result in page.object_list %}
    <tr class="state-{{result.state}}">
      <td>
        <span class="title"><img class="icon" src="{{result.icon}}"><a href="{{ result.path }}">{{ result.title }}</a></span>
        <span class="byline">{% if result.state == "private" %}<span class="badge badge-important">private</span>{%endif%} by {{result.owner}} &mdash; published {{result.publication}} &mdash; last modified {{result.modified}} {# &mdash; filed under foo, bar #}</span>
        <p>{{result.description|safe}}</p>
      </td>
    </tr>
    {% empty %}
    <tr>
      <td>
        <p>No results found.</p>
      </td>
    </tr>
    {% endfor %}
    </table>
  </div>
</div>

{% if page.has_previous or page.has_next %}
    <div>
        {% if page.has_previous %}<a href="?q={{ query }}&amp;page={{ page.previous_page_number }}">{% endif %}&laquo; Previous{% if page.has_previous %}</a>{% endif %}
        |
        {% if page.has_next %}<a href="?q={{ query }}&amp;page={{ page.next_page_number }}">{% endif %}Next &raquo;{% if page.has_next %}</a>{% endif %}
    </div>
{% endif %}
{% endif %}
</div>
{% endblock %}
